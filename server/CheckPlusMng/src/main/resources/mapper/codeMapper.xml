<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="checkplusmng.codeMapper">
	<select id="selectCode" resultType="kr.peelknight.common.model.CM_Code"
			statementType="PREPARED" parameterType="java.util.Map">
		SELECT type, code, codeName, comment, orderSeq
		  FROM CM_Code
		 WHERE type is not null
		<if test="type != null">
		   AND type = #{type}
		</if>
		<if test="code != null">
		   AND code = #{code}
		</if>
		ORDER BY type, orderSeq, code
		<if test="offset != null and size != null">
		 LIMIT ${offset}, ${size}
		</if>
	</select>

	<select id="selectCodePaging" resultType="kr.peelknight.common.model.CM_Paging"
			statementType="PREPARED" parameterType="java.util.Map">
		SELECT COUNT(type) as totalCount
		  FROM CM_Code
		 WHERE type is not null
		<if test="type != null">
		   AND type = #{type}
		</if>
		<if test="code != null">
		   AND code = #{code}
		</if>
	</select>

	<insert id="insertCode" parameterType="kr.peelknight.common.model.CM_Code"
		statementType="PREPARED">
		INSERT INTO CM_Code (
			type, code, codeName, comment, orderSeq
		) VALUES (
			#{type}, #{code}, #{codeName}, #{comment}, #{orderSeq}
		)
	</insert>

	<insert id="insertCodes" parameterType="java.util.Map"
		statementType="PREPARED">
		INSERT INTO CM_Code (
			type, code, codeName, comment, orderSeq
		) VALUES
		<foreach collection="list" item="item" separator=" , " >
		(
			#{item.type}, #{item.code}, #{item.codeName}, #{item.comment}, #{item.orderSeq}
		)
		</foreach>
	</insert>

	<update id="updateCode" parameterType="kr.peelknight.common.model.CM_Code">
		UPDATE CM_Code SET
			   codeName = #{codeName},
			   comment = #{comment},
			   orderSeq = #{orderSeq}
		 WHERE type = #{type}
		   AND code = #{code}
	</update>

	<delete id="deleteCode" parameterType="kr.peelknight.common.model.CM_Code">
		DELETE FROM CM_Code
		 WHERE type = #{type}
		   AND code = #{code}
	</delete>

	<delete id="deleteCodeByType" parameterType="kr.peelknight.common.model.CM_CodeType">
		DELETE FROM CM_Code
		 WHERE type = #{type}
	</delete>
</mapper>
